import{r as b,p as E}from"./entry-9e926dad.mjs";try{self["workbox:window:6.5.2"]&&_()}catch{}function P(e,r){return new Promise(function(t){var o=new MessageChannel;o.port1.onmessage=function(v){t(v.data)},e.postMessage(r,[o.port2])})}function k(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function L(e,r){var t;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(t=function(v,d){if(v){if(typeof v=="string")return R(v,d);var u=Object.prototype.toString.call(v).slice(8,-1);return u==="Object"&&v.constructor&&(u=v.constructor.name),u==="Map"||u==="Set"?Array.from(v):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?R(v,d):void 0}}(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(t=e[Symbol.iterator]()).next.bind(t)}try{self["workbox:core:6.5.2"]&&_()}catch{}var w=function(){var e=this;this.promise=new Promise(function(r,t){e.resolve=r,e.reject=t})};function S(e,r){var t=location.href;return new URL(e,t).href===new URL(r,t).href}var g=function(e,r){this.type=e,Object.assign(this,r)};function p(e,r,t){return t?r?r(e):e:(e&&e.then||(e=Promise.resolve(e)),r?e.then(r):e)}function j(){}var U={type:"SKIP_WAITING"};function W(e,r){if(!r)return e&&e.then?e.then(j):Promise.resolve()}var A=function(e){var r,t;function o(f,s){var n,i;return s===void 0&&(s={}),(n=e.call(this)||this).nn={},n.tn=0,n.rn=new w,n.en=new w,n.on=new w,n.un=0,n.an=new Set,n.cn=function(){var c=n.fn,a=c.installing;n.tn>0||!S(a.scriptURL,n.sn.toString())||performance.now()>n.un+6e4?(n.vn=a,c.removeEventListener("updatefound",n.cn)):(n.hn=a,n.an.add(a),n.rn.resolve(a)),++n.tn,a.addEventListener("statechange",n.ln)},n.ln=function(c){var a=n.fn,l=c.target,h=l.state,m=l===n.vn,y={sw:l,isExternal:m,originalEvent:c};!m&&n.mn&&(y.isUpdate=!0),n.dispatchEvent(new g(h,y)),h==="installed"?n.wn=self.setTimeout(function(){h==="installed"&&a.waiting===l&&n.dispatchEvent(new g("waiting",y))},200):h==="activating"&&(clearTimeout(n.wn),m||n.en.resolve(l))},n.dn=function(c){var a=n.hn,l=a!==navigator.serviceWorker.controller;n.dispatchEvent(new g("controlling",{isExternal:l,originalEvent:c,sw:a,isUpdate:n.mn})),l||n.on.resolve(a)},n.gn=(i=function(c){var a=c.data,l=c.ports,h=c.source;return p(n.getSW(),function(){n.an.has(h)&&n.dispatchEvent(new g("message",{data:a,originalEvent:c,ports:l,sw:h}))})},function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];try{return Promise.resolve(i.apply(this,c))}catch(l){return Promise.reject(l)}}),n.sn=f,n.nn=s,navigator.serviceWorker.addEventListener("message",n.gn),n}t=e,(r=o).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t;var v,d,u=o.prototype;return u.register=function(f){var s=(f===void 0?{}:f).immediate,n=s!==void 0&&s;try{var i=this;return function(c,a){var l=c();return l&&l.then?l.then(a):a(l)}(function(){if(!n&&document.readyState!=="complete")return W(new Promise(function(c){return window.addEventListener("load",c)}))},function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),p(i.bn(),function(c){i.fn=c,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var a=i.fn.waiting;return a&&S(a.scriptURL,i.sn.toString())&&(i.hn=a,Promise.resolve().then(function(){i.dispatchEvent(new g("waiting",{sw:a,wasWaitingBeforeRegister:!0}))}).then(function(){})),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn})})}catch(c){return Promise.reject(c)}},u.update=function(){try{return this.fn?W(this.fn.update()):void 0}catch(f){return Promise.reject(f)}},u.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},u.messageSW=function(f){try{return p(this.getSW(),function(s){return P(s,f)})}catch(s){return Promise.reject(s)}},u.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&P(this.fn.waiting,U)},u.pn=function(){var f=navigator.serviceWorker.controller;return f&&S(f.scriptURL,this.sn.toString())?f:void 0},u.bn=function(){try{var f=this;return function(s,n){try{var i=s()}catch(c){return n(c)}return i&&i.then?i.then(void 0,n):i}(function(){return p(navigator.serviceWorker.register(f.sn,f.nn),function(s){return f.un=performance.now(),s})},function(s){throw s})}catch(s){return Promise.reject(s)}},v=o,(d=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&k(v.prototype,d),o}(function(){function e(){this.Pn=new Map}var r=e.prototype;return r.addEventListener=function(t,o){this.Sn(t).add(o)},r.removeEventListener=function(t,o){this.Sn(t).delete(o)},r.dispatchEvent=function(t){t.target=this;for(var o,v=L(this.Sn(t.type));!(o=v()).done;)(0,o.value)(t)},r.Sn=function(t){return this.Pn.has(t)||this.Pn.set(t,new Set),this.Pn.get(t)},e}());function O(e={}){const{immediate:r=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:v,onRegisterError:d}=e;let u;const f=async(s=!0)=>{};return"serviceWorker"in navigator&&(u=new A(`${E()}sw.js`,{scope:`${E()}`,type:"classic"}),u.addEventListener("activated",s=>{s.isUpdate?window.location.reload():o==null||o()}),u.register({immediate:r}).then(s=>{v==null||v(s)}).catch(s=>{d==null||d(s)})),f}function I(e={}){const{immediate:r=!0,onNeedRefresh:t,onOfflineReady:o,onRegistered:v,onRegisterError:d}=e,u=b(!1),f=b(!1);return{updateServiceWorker:O({immediate:r,onNeedRefresh(){u.value=!0,t==null||t()},onOfflineReady(){f.value=!0,o==null||o()},onRegistered:v,onRegisterError:d}),offlineReady:f,needRefresh:u}}export{I as useRegisterSW};
